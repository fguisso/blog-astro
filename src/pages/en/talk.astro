---
import BaseHead from '../../components/BaseHead.astro';
import Footer from '../../components/Footer.astro';
import GlowBox from '../../components/GlowBox.astro';
import GlowButton from '../../components/GlowButton.astro';
import Header from '../../components/Header.astro';
import Chip from '../../components/Chip.astro';
import TalkAvatarBadge from '../../components/TalkAvatarBadge.astro';
import Timeline from '../../components/Timeline.astro';
import TimelineItem from '../../components/TimelineItem.astro';
import { getHtmlLang, type LocaleCode } from '../../i18n/config';
import { getSiteMeta } from '../../theme.config';

const locale: LocaleCode = 'en';
const htmlLang = getHtmlLang(locale);
const currentPath = Astro.url?.pathname ?? '/';
const currentSearch = Astro.url?.search ?? '';
const site = getSiteMeta(locale);

type TalkArticle = {
	title: string;
	url: string;
	meta?: string;
};

type TalkResource = {
	label: string;
	url: string;
};

type Talk = {
	event: string;
	tag: string;
	talkTitle: string;
	summary?: string;
	article?: TalkArticle;
	slides?: TalkResource;
	video?: TalkResource;
};

const repoCard = {
	title: 'fguisso/talks',
	description:
		'Slide decks built with Slidev and published automatically to GitHub Pages through a GitHub Actions pipeline.',
	url: 'https://github.com/fguisso/talks',
};

const repoHighlights = [
	'Markdown-first decks powered by Slidev',
	'Continuous delivery to GitHub Pages',
	'Responsive flows that work even on phones',
];

const talks: Talk[] = [
	{
		event: 'DevOpsDays Natal 2024',
		tag: 'ebpf',
		talkTitle: 'K8s Under Control: eBPF and Kubescape for Total Security',
		summary:
			'I documented every demo from the talk: eBPF captures, Kubescape policies, and the observability pipeline we run in production.',
		article: {
			title: 'eBPF in Action',
			url: 'https://guisso.dev/posts/ebpf-and-security/',
			meta: 'Nov 8, 2024 · 647 words · 4 minutes',
		},
		slides: {
			label: 'Slides (PT-BR)',
			url: 'https://guisso.dev/talks/ebpf-kubescape',
		},
	},
		{
			event: 'Meetup OWASP Brasilia',
			tag: 'threat-modeling',
			talkTitle: 'Threat Modeling Express',
			summary:
				'Hands-on threat modeling with fast STRIDE flows and ready-made catalogs so the team leaves the meeting with prioritized AppSec stories.',
			article: {
				title: 'Threat Modeling Intro',
				url: 'https://guisso.dev/posts/threat-modeling-intro/',
				meta: 'Sep 28, 2024 · 2,739 words · 13 minutes',
			},
			slides: {
				label: 'Slides (PT-BR)',
				url: 'https://guisso.dev/talks/threat-modeling',
			},
			video: {
				label: 'Watch on YouTube',
				url: 'https://youtu.be/3TVmFqaAA1o',
			},
		},
		{
			event: 'Debian Day Natal 2024',
			tag: 'homelab',
			talkTitle: 'Proxmox and Homelab',
			summary:
				'A live, hands-on session: from bare metal to a Proxmox cluster. Every command is written down in the companion post.',
			article: {
				title: 'Proxmox and Homelab: Turning a Mini PC into a Respectable Server',
				url: 'https://guisso.dev/misc/proxmox-debian-day/',
				meta: 'Aug 17, 2024 · 576 words · 3 minutes',
			},
			slides: {
				label: 'Slides (PT-BR)',
				url: 'https://guisso.dev/talks/proxmox-homelab',
			},
		},
	{
		event: 'Google IO Extended Natal 2023',
		tag: 'LLM',
		talkTitle: 'OWASP Top 10 LLM Vulnerabilities',
		summary:
			'How to avoid the OWASP Top 10 LLM vulnerabilities in your AI projects and keep inference flows under control.',
		slides: {
			label: 'Slides',
			url: 'https://guisso.dev/talks/top-10-llm-0.5',
		},
	},
	{
		event: 'Potiday JS 2023',
		tag: 'appsec',
		talkTitle: 'DevSec — Understanding and fixing Session and XSS vulnerabilities',
		summary:
			'Session bugs and XSS attacks are still common on JS apps; this talk breaks down the flaws and shows practical mitigations.',
		slides: {
			label: 'Slides',
			url: 'https://guisso.dev/talks/xss-session',
		},
	},
		{
			event: 'Semana ARATU II',
			tag: 'appsec',
			talkTitle: 'DAST inside the pipeline',
			summary:
				'How I adapted DAST scanners to fit CI/CD without blocking deploys, tuning profiles and correlating findings automatically.',
			video: {
				label: 'Watch on YouTube',
				url: 'https://youtu.be/mNvtYrEjaHA',
			},
		},
		{
			event: 'DockerCon 2021 · Sala Brasil',
			tag: 'appsec',
			talkTitle: 'Container security wired into the pipeline',
			summary:
				'I shared the container image hardening flow and runtime policies we implemented in GitOps pipelines for distributed teams.',
			video: {
				label: 'Watch on YouTube',
				url: 'https://youtu.be/bR9SlnxJI-w',
			},
		},
		{
			event: 'Campus Party Amazônia',
			tag: 'blockchain',
			talkTitle: 'Instant payments with crypto',
			summary:
				'How I assembled an instant-payment stack using self-hosted wallets, simple contracts, and accessible UX.',
			video: {
				label: 'Watch on YouTube',
				url: 'https://youtu.be/2HKUgc0LjcI',
			},
		},
];

const externalAttrs = (url?: string): Record<string, string> => {
	if (!url || !url.startsWith('http')) {
		return {};
	}
	return { target: '_blank', rel: 'noopener noreferrer' };
};
---

<!doctype html>
<html lang={htmlLang}>
	<head>
		<BaseHead
			title={`Talks · ${site.title}`}
			description="Slides and related articles from my sessions on AppSec, homelab, eBPF, and automation."
			locale={locale}
		/>
	</head>
	<body>
		<Header locale={locale} pathname={currentPath} search={currentSearch} />
		<main class="page-shell talk-shell">
			<section class="talk-hero">
				<div class="talk-hero__copy">
					<p class="eyebrow">talks</p>
					<h1>
            Joined one of my talks? All <span class="display-special primary">slides</span> are right here.
					</h1>
					<p>
						Every deck is produced in <a href="https://sli.dev" target="_blank" rel="noopener noreferrer">Slidev</a> with <strong>Markdown</strong> and shipped automatically through <strong>GitHub Actions</strong>.
						I can open the same slides anywhere—from the auditorium to my phone at the airport.
					</p>
					<p>
						Want to go deeper? Some talks become long-form blog posts with code, links, and commands. Use this page as the hub to access slides, articles, and references.
					</p>
					<div class="talk-hero__profile">
						<TalkAvatarBadge />
						<div>
							<p class="talk-hero__profile-name">Fernando Guisso</p>
							<p class="talk-hero__profile-note">Sharing and learning, hack the planet!</p>
						</div>
					</div>
				</div>
				<GlowBox class="talk-hero__repo" accent="highlight" padding="relaxed">
					<p class="talk-hero__repo-label">automation</p>
					<h3>{repoCard.title}</h3>
					<p class="talk-hero__repo-description">{repoCard.description}</p>
					<ul class="talk-hero__repo-list">
						{repoHighlights.map((item) => (
							<li>{item}</li>
						))}
					</ul>
						<div class="talk-hero__repo-actions">
							<a href="https://sli.dev" class="talk-hero__repo-meta" target="_blank" rel="noopener noreferrer">
								Built with Slidev
							</a>
							<GlowButton href={repoCard.url} variant="accent" size="sm" target="_blank" rel="noopener noreferrer">
								<span class="talk-hero__repo-icon" aria-hidden="true">
									<svg viewBox="0 0 496 512" role="img">
										<path
											fill="currentColor"
											d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm31.1 4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8z"
										/>
									</svg>
								</span>
								View repository
							</GlowButton>
						</div>
					</GlowBox>
				</section>

				<section id="agenda" class="talk-list">
				<div class="section-head">
					<p class="eyebrow">schedule</p>
					<h2>
						<span class="display-special primary">Recent talks</span> and downloadable material
					</h2>
					<p class="talk-list__intro">
						Responsive slides, recorded demos, and links to companion articles. Open them directly in the browser or download for later.
					</p>
				</div>
				<Timeline class="talk-timeline">
					{talks.map((talk, index) => (
						<TimelineItem accent={index % 3 === 0 ? 'accent' : index % 3 === 1 ? 'secondary' : 'highlight'}>
							<GlowBox class="talk-card">
								<div class="talk-card__head">
									<div>
										<p class="talk-card__event">{talk.event}</p>
										<h3>{talk.talkTitle}</h3>
									</div>
									<Chip variant="solid">{talk.tag}</Chip>
								</div>
								{talk.summary && <p class="talk-card__summary">{talk.summary}</p>}
								{talk.article && (
									<a class="talk-card__article" href={talk.article.url} {...externalAttrs(talk.article.url)}>
										<div>
											<p class="talk-card__article-label">Related post</p>
											<p class="talk-card__article-title">{talk.article.title}</p>
											{talk.article.meta && <p class="talk-card__article-meta">{talk.article.meta}</p>}
										</div>
										<span aria-hidden="true" class="talk-card__article-icon">↗</span>
									</a>
								)}
								{(talk.article || talk.slides || talk.video) && (
									<div class="talk-card__actions">
										{talk.article && (
											<GlowButton
												href={talk.article.url}
												variant="ghost"
												size="sm"
												{...externalAttrs(talk.article.url)}
											>
												Read article
											</GlowButton>
										)}
										{talk.video && (
											<GlowButton
												href={talk.video.url}
												variant="secondary"
												size="sm"
												target="_blank"
												rel="noopener noreferrer"
											>
												{talk.video.label}
											</GlowButton>
										)}
										{talk.slides && (
											<GlowButton
												href={talk.slides.url}
												variant="accent"
												size="sm"
												target="_blank"
												rel="noopener noreferrer"
											>
												{talk.slides.label}
											</GlowButton>
										)}
									</div>
								)}
							</GlowBox>
						</TimelineItem>
					))}
				</Timeline>
			</section>
		</main>
		<Footer locale={locale} />
	</body>
</html>

<style>
	.talk-shell {
		padding-top: 4rem;
		padding-bottom: 5rem;
		display: flex;
		flex-direction: column;
		gap: 3.5rem;
	}

	.talk-hero {
		display: grid;
		grid-template-columns: repeat(2, minmax(0, 1fr));
		gap: 2.5rem;
		align-items: stretch;
	}

	.talk-hero__copy h1 {
		margin-bottom: 1rem;
	}

	.talk-hero__copy p {
		color: var(--color-muted);
	}

	.talk-hero__cta {
		display: flex;
		flex-wrap: wrap;
		gap: 0.85rem;
		margin: 1.5rem 0 1rem;
	}

	.talk-hero__profile {
		display: flex;
		align-items: center;
		gap: 0.9rem;
		margin-top: 0.75rem;
	}

	.talk-hero__profile-name {
		margin: 0;
		font-weight: 600;
		color: var(--color-fg);
	}

	.talk-hero__profile-note {
		margin: 0.1rem 0 0;
		color: var(--color-muted);
		font-size: 0.9rem;
	}

	.talk-hero__repo {
		min-height: 100%;
	}

	.talk-hero__repo-label {
		text-transform: uppercase;
		letter-spacing: 0.25em;
		font-size: 0.7rem;
		color: var(--color-highlight);
		margin: 0 0 0.5rem;
	}

	.talk-hero__repo-description {
		color: var(--color-muted);
		margin-bottom: 1.5rem;
	}

	.talk-hero__repo-list {
		list-style: none;
		padding: 0;
		margin: 0 0 1.5rem;
		display: flex;
		flex-direction: column;
		gap: 0.4rem;
		color: var(--color-muted-strong);
	}

	.talk-hero__repo-list li::before {
		content: '•';
		margin-right: 0.5rem;
		color: var(--color-accent);
	}

	.talk-hero__repo-actions {
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 1rem;
		flex-wrap: wrap;
	}

	.talk-hero__repo-meta {
		font-size: 0.9rem;
		color: var(--color-muted);
	}

	.talk-hero__repo-icon {
		display: inline-flex;
		width: 1rem;
		height: 1rem;
	}

	.talk-hero__repo-icon svg {
		width: 100%;
		height: 100%;
	}

	.talk-list {
		display: flex;
		flex-direction: column;
		gap: 2rem;
	}

	.talk-list .section-head h2 {
		margin-bottom: 0.5rem;
	}

	.talk-list__intro {
		max-width: 720px;
		color: var(--color-muted);
	}

	.talk-timeline {
		margin: 1rem 0 0;
	}

	.talk-card {
		height: 100%;
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	.talk-card__head {
		display: flex;
		align-items: flex-start;
		justify-content: space-between;
		gap: 1rem;
	}

	.talk-card__event {
		font-size: 0.9rem;
		text-transform: uppercase;
		letter-spacing: 0.12em;
		color: var(--color-muted);
		margin: 0 0 0.35rem;
	}

	.talk-card__summary {
		color: var(--color-muted);
		margin: 0;
	}

	.talk-card__article {
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 1rem;
		padding: 0.85rem 1rem;
		border-radius: var(--border-radius);
		background: rgba(255, 255, 255, 0.04);
		border: 1px solid rgba(255, 255, 255, 0.08);
		color: var(--color-fg);
		text-decoration: none;
		transition: border-color 0.2s ease, transform 0.2s ease;
	}

	.talk-card__article:hover {
		border-color: rgba(0, 255, 127, 0.5);
		transform: translateY(-2px);
	}

	.talk-card__article-label {
		margin: 0;
		font-size: 0.8rem;
		text-transform: uppercase;
		letter-spacing: 0.1em;
		color: var(--color-muted);
	}

	.talk-card__article-title {
		margin: 0.1rem 0;
		font-weight: 600;
		color: var(--color-fg);
	}

	.talk-card__article-meta {
		margin: 0;
		color: var(--color-muted);
		font-size: 0.85rem;
	}

	.talk-card__article-icon {
		font-size: 1.3rem;
		color: var(--color-accent);
	}

	.talk-card__actions {
		margin-top: auto;
		display: flex;
		align-items: center;
		justify-content: flex-start;
		gap: 0.75rem;
		flex-wrap: wrap;
	}

	@media (max-width: 980px) {
		.talk-hero {
			grid-template-columns: 1fr;
		}
	}
</style>
