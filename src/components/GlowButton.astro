---
import type { HTMLAttributes } from 'astro/types';
import { withBase } from '../utils/paths';

type Variant = 'primary' | 'secondary' | 'accent' | 'outline' | 'ghost';
type Size = 'sm' | 'md' | 'lg';

interface Props extends HTMLAttributes<'button'> {
	href?: string;
	variant?: Variant;
	size?: Size;
}

const { href, variant = 'primary', size = 'md', class: className, ...rest } = Astro.props as Props;
const resolvedHref = typeof href === 'string' ? withBase(href) : undefined;
const classes = [
	'btn',
	`btn-${variant}`,
	{
		'btn-sm': size === 'sm',
		'btn-lg': size === 'lg',
	},
	className,
];
---

{resolvedHref ? (
	<a href={resolvedHref} class:list={classes} {...rest}>
		<slot />
	</a>
) : (
	<button class:list={classes} {...rest}>
		<slot />
	</button>
)}
